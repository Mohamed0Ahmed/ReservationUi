import{a as $}from"./chunk-3LPFTLTC.js";import"./chunk-PYGYMGSD.js";import{l as I}from"./chunk-U5OIGZK2.js";import{a as F,c as M,e as V,n as N}from"./chunk-5LMW7FD6.js";import{$ as l,Ba as A,Da as m,Ea as c,G as T,Ia as u,Ja as g,Ka as D,N as _,O as x,Qa as S,aa as b,fb as E,ia as h,ka as f,kb as k,ma as v,sa as d,ua as w,va as y,wa as o,xa as s}from"./chunk-GW44SSYG.js";var j=(t,r)=>r.id;function q(t,r){if(t&1){let e=A();o(0,"tr",11)(1,"td",12),u(2),s(),o(3,"td",13)(4,"button",14),m("click",function(){let i=_(e).$implicit,a=c(2);return x(a.openModal("edit",i.id))}),u(5," \u062A\u0639\u062F\u064A\u0644 "),s(),o(6,"button",15),m("click",function(){let i=_(e).$implicit,a=c(2);return x(a.openModal("delete",i.id))}),u(7," \u062D\u0630\u0641 "),s()()()}if(t&2){let e=r.$implicit;l(2),g(e.name)}}function B(t,r){t&1&&(o(0,"tr")(1,"td",16),u(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0646\u0634\u0637\u0629"),s()())}function z(t,r){if(t&1&&(w(0,q,8,1,"tr",11,j),f(2,B,3,0,"tr")),t&2){let e=c();y(e.activeAssistanceTypes()),l(2),d(2,e.activeAssistanceTypes().length?-1:2)}}function G(t,r){if(t&1){let e=A();o(0,"tr",11)(1,"td",12),u(2),s(),o(3,"td",17)(4,"button",18),m("click",function(){let i=_(e).$implicit,a=c(2);return x(a.openModal("edit",i.id))}),u(5," \u062A\u0639\u062F\u064A\u0644 "),s(),o(6,"button",19),m("click",function(){let i=_(e).$implicit,a=c(2);return x(a.openModal("restore",i.id))}),u(7," \u0627\u0633\u062A\u0639\u0627\u062F\u0629 "),s()()()}if(t&2){let e=r.$implicit;l(2),g(e.name)}}function H(t,r){t&1&&(o(0,"tr")(1,"td",16),u(2,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0645\u062D\u0630\u0648\u0641\u0629"),s()())}function J(t,r){if(t&1&&(w(0,G,8,1,"tr",11,j),f(2,H,3,0,"tr")),t&2){let e=c();y(e.deletedAssistanceTypes()),l(2),d(2,e.deletedAssistanceTypes().length?-1:2)}}function K(t,r){if(t&1){let e=A();o(0,"div",22)(1,"input",29),m("ngModelChange",function(i){_(e);let a=c(2);return x(a.newAssistanceName.set(i))}),s()()}if(t&2){let e=c(2);l(),v("ngModel",e.newAssistanceName())}}function L(t,r){t&1&&(o(0,"p",23),u(1,"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629\u061F"),s())}function O(t,r){t&1&&(o(0,"p",23),u(1,"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629\u061F"),s())}function P(t,r){if(t&1&&(o(0,"p",24),u(1),s()),t&2){let e=c(2);l(),g(e.modalError())}}function Q(t,r){if(t&1){let e=A();o(0,"button",30),m("click",function(){_(e);let i=c(2);return x(i.saveAssistance())}),u(1," \u062D\u0641\u0638 "),s()}}function R(t,r){if(t&1){let e=A();o(0,"button",31),m("click",function(){_(e);let i=c(2);return x(i.confirmAction())}),u(1," \u062A\u0623\u0643\u064A\u062F "),s()}}function U(t,r){if(t&1){let e=A();o(0,"div",10)(1,"div",20)(2,"h2",21),u(3),s(),f(4,K,2,1,"div",22)(5,L,2,0,"p",23)(6,O,2,0,"p",23)(7,P,2,1,"p",24),o(8,"div",25)(9,"button",26),m("click",function(){_(e);let i=c();return x(i.closeModal())}),u(10," \u0625\u0644\u063A\u0627\u0621 "),s(),f(11,Q,2,0,"button",27)(12,R,2,0,"button",28),s()()()}if(t&2){let e=c();l(3),D(" ",e.modalAction()==="add"?"\u0625\u0636\u0627\u0641\u0629":e.modalAction()==="edit"?"\u062A\u0639\u062F\u064A\u0644":e.modalAction()==="delete"?"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641":"\u0627\u0633\u062A\u0639\u0627\u062F\u0629"," \u0646\u0648\u0639 \u0645\u0633\u0627\u0639\u062F\u0629 "),l(),d(4,e.modalAction()!=="delete"&&e.modalAction()!=="restore"?4:-1),l(),d(5,e.modalAction()==="delete"?5:-1),l(),d(6,e.modalAction()==="restore"?6:-1),l(),d(7,e.modalError()?7:-1),l(4),d(11,e.modalAction()!=="delete"&&e.modalAction()!=="restore"?11:-1),l(),d(12,e.modalAction()==="delete"||e.modalAction()==="restore"?12:-1)}}var oe=(()=>{class t{constructor(e,n){this.assistanceService=e,this.toastr=n,this.activeAssistanceTypes=h([]),this.deletedAssistanceTypes=h([]),this.showDeleted=h(!1),this.modalError=h(""),this.showModal=h(!1),this.modalAction=h("add"),this.selectedAssistanceId=h(null),this.newAssistanceName=h(""),this.loadAssistanceTypes()}loadAssistanceTypes(){this.assistanceService.getDefaultAssistanceTypes().subscribe({next:e=>{e.isSuccess&&e.data&&this.activeAssistanceTypes.set(e.data)},error:()=>{this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649")}})}loadDeletedAssistanceTypes(){this.assistanceService.getDefaultDeletedAssistanceTypes().subscribe({next:e=>{e.isSuccess&&e.data&&this.deletedAssistanceTypes.set(e.data)},error:()=>{this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629 \u0627\u0644\u0645\u062D\u0630\u0648\u0641\u0629\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649")}})}toggleShowDeleted(){this.showDeleted.update(e=>!e),this.showDeleted()&&this.deletedAssistanceTypes().length===0&&this.loadDeletedAssistanceTypes()}openModal(e,n){if(this.modalAction.set(e),this.showModal.set(!0),this.selectedAssistanceId.set(n??null),this.modalError.set(""),e==="edit"&&n!=null){let i=this.showDeleted()?this.deletedAssistanceTypes().find(a=>a.id===n):this.activeAssistanceTypes().find(a=>a.id===n);i&&this.newAssistanceName.set(i.name)}else this.newAssistanceName.set("")}closeModal(){this.showModal.set(!1),this.modalError.set(""),this.newAssistanceName.set(""),this.selectedAssistanceId.set(null),this.modalAction.set("add")}saveAssistance(){let e=this.newAssistanceName(),n=this.modalAction(),i=this.selectedAssistanceId();if(!e){this.modalError.set("\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629 \u0645\u0637\u0644\u0648\u0628");return}(n==="add"?this.assistanceService.createDefaultAssistanceType({Name:e}):this.assistanceService.updateDefaultAssistanceType(i,{Name:e})).subscribe({next:p=>{p.isSuccess&&p.data?(this.loadAssistanceTypes(),this.toastr.success(p.message||"\u062A\u0645\u062A \u0627\u0644\u0639\u0645\u0644\u064A\u0629 \u0628\u0646\u062C\u0627\u062D"),this.closeModal()):(this.modalError.set(p.message||"\u0641\u0634\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0629"),this.toastr.error(p.message||"\u0641\u0634\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0629\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"))},error:()=>{this.modalError.set("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0641\u0638\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"),this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0641\u0638")}})}confirmAction(){let e=this.modalAction(),n=this.selectedAssistanceId();if(!n)return;(e==="delete"?this.assistanceService.deleteDefaultAssistanceType(n):this.assistanceService.restoreDefaultAssistanceType(n)).subscribe({next:a=>{a.isSuccess?(e==="delete"?(this.activeAssistanceTypes.update(p=>p.filter(C=>C.id!==n)),this.loadDeletedAssistanceTypes()):(this.deletedAssistanceTypes.update(p=>p.filter(C=>C.id!==n)),this.loadAssistanceTypes()),this.toastr.success(a.message||"\u062A\u0645\u062A \u0627\u0644\u0639\u0645\u0644\u064A\u0629 \u0628\u0646\u062C\u0627\u062D"),this.closeModal()):(this.modalError.set(a.message||"\u0641\u0634\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0629"),this.toastr.error(a.message||"\u0641\u0634\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0629\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"))},error:()=>{this.modalError.set("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064A\u0629\u060C \u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649"),this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064A\u0629")}})}static{this.\u0275fac=function(n){return new(n||t)(b($),b(I))}}static{this.\u0275cmp=T({type:t,selectors:[["app-default-assistance"]],standalone:!0,features:[S],decls:20,vars:5,consts:[["dir","rtl",1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","text-white","mb-4"],[1,"mb-4","flex","items-center","space-x-4","space-x-reverse"],[1,"px-4","py-2","hover:bg-opacity-80",3,"click","ngClass"],[1,"px-4","py-2","bg-green-500","text-white","rounded-lg","hover:bg-green-600",3,"click"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-right","text-gray-400"],[1,"text-xs","text-white","uppercase","bg-gray-700"],[1,"text-center","font-bold"],["scope","col",1,"px-6","py-3"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"odd:bg-gray-900","even:bg-gray-800","border-b","border-gray-700","text-center","text-white"],[1,"px-6","py-4"],[1,"px-6","py-4","text-center"],[1,"px-3","py-1","m-1","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600",3,"click"],[1,"px-3","py-1","m-1","bg-red-500","text-white","rounded-lg","hover:bg-red-600",3,"click"],["colspan","2",1,"py-4","px-6","text-center","text-gray-400"],[1,"px-6","py-4","space-x-2","space-x-reverse"],[1,"px-3","py-1","mx-1","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600",3,"click"],[1,"px-3","py-1","mx-1","bg-green-500","text-white","rounded-lg","hover:bg-green-600",3,"click"],[1,"bg-gray-800","p-6","rounded-lg","w-1/3"],[1,"text-xl","text-white","mb-4"],[1,"mb-4"],[1,"mb-4","text-gray-400"],[1,"text-red-500","mb-4"],[1,"flex","justify-end","space-x-2","space-x-reverse"],[1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700",3,"click"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600"],[1,"px-4","py-2","bg-red-500","text-white","rounded-lg","hover:bg-red-600"],["placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629",1,"w-full","px-3","py-2","border","border-gray-600","rounded-lg","bg-gray-700","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600",3,"click"],[1,"px-4","py-2","bg-red-500","text-white","rounded-lg","hover:bg-red-600",3,"click"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"h1",1),u(2,"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0627\u062A \u0627\u0644\u062B\u0627\u0628\u062A\u0629"),s(),o(3,"div",2)(4,"button",3),m("click",function(){return i.toggleShowDeleted()}),u(5),s(),o(6,"button",4),m("click",function(){return i.openModal("add")}),u(7," \u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u0645\u0633\u0627\u0639\u062F\u0629 "),s()(),o(8,"div",5)(9,"table",6)(10,"thead",7)(11,"tr",8)(12,"th",9),u(13,"\u0627\u0644\u0627\u0633\u0645"),s(),o(14,"th",9),u(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),s()()(),o(16,"tbody"),f(17,z,3,1)(18,J,3,1),s()()(),f(19,U,13,7,"div",10),s()),n&2&&(l(4),v("ngClass",i.showDeleted()?"bg-blue-500 text-white hover:bg-blue-600":"bg-red-500 text-white hover:bg-red-600"),l(),D(" ",i.showDeleted()?"\u0639\u0631\u0636 \u0627\u0644\u0646\u0634\u0637":"\u0639\u0631\u0636 \u0627\u0644\u0645\u062D\u0630\u0648\u0641"," "),l(12),d(17,i.showDeleted()?-1:17),l(),d(18,i.showDeleted()?18:-1),l(),d(19,i.showModal()?19:-1))},dependencies:[N,F,M,V,k,E]})}}return t})();export{oe as DefaultAssistanceComponent};
