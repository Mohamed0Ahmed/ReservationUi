import{a as c}from"./chunk-4UGSAFNV.js";import{B as a,Bb as p,E as s,j as h,nb as o,y as r}from"./chunk-HYLWAQAG.js";var I=(()=>{class i{constructor(t,e){this.http=t,this.authService=e,this.apiUrl=`${p.apiUrl}/menus`,this.itemsCache=null}getStoreId(){return this.authService.getStoreId()}getAllItems(t){return this.itemsCache?h({isSuccess:!0,statusCode:200,message:"Cached data",data:this.itemsCache}):this.http.get(`${this.apiUrl}/items/all/${t}`).pipe(r(e=>{e.isSuccess&&e.data&&(this.itemsCache=e.data)}))}clearItemsCache(){this.itemsCache=null}getCategories(){let t=this.getStoreId();if(!t)throw new Error("Store ID not found");return this.http.get(`${this.apiUrl}/categories/${t}`)}getDeletedCategories(){let t=this.getStoreId();if(!t)throw new Error("Store ID not found");return this.http.get(`${this.apiUrl}/categories/deleted/${t}`)}createCategory(t){let e=this.getStoreId();if(!e)throw new Error("Store ID not found");return this.http.post(`${this.apiUrl}/categories`,{name:t,storeId:parseInt(e)})}updateCategory(t,e){return this.http.put(`${this.apiUrl}/categories/${t}`,{name:e})}deleteCategory(t){return this.http.delete(`${this.apiUrl}/categories/${t}`)}restoreCategory(t){return this.http.put(`${this.apiUrl}/categories/restore/${t}`,{})}getItems(t){return this.http.get(`${this.apiUrl}/items/${t}`)}getDeletedItems(t){return this.http.get(`${this.apiUrl}/items/deleted/${t}`)}createItem(t){return this.http.post(`${this.apiUrl}/items`,t).pipe(r(()=>this.clearItemsCache()))}updateItem(t,e){return this.http.put(`${this.apiUrl}/items/${t}`,e).pipe(r(()=>this.clearItemsCache()))}deleteItem(t){return this.http.delete(`${this.apiUrl}/items/${t}`).pipe(r(()=>this.clearItemsCache()))}HardDeleteItem(t){return this.http.delete(`${this.apiUrl}/items/hard/${t}`).pipe(r(()=>this.clearItemsCache()))}restoreItem(t){return this.http.put(`${this.apiUrl}/items/restore/${t}`,{}).pipe(r(()=>this.clearItemsCache()))}static{this.\u0275fac=function(e){return new(e||i)(s(o),s(c))}}static{this.\u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{I as a};
